<!--
If not stated otherwise in this file or this component's Licenses.txt file the
following copyright and licenses apply:
Copyright 2024 RDK Management
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<!-- Main container for device edit page -->
<div class="container-fluid">
  <!-- Row for header and title section -->
  <div class="row borders-btm">
    <!-- Column for left header content -->
    <div class="col">
      <!-- Row for flavor selection -->
      <div class="row">
        <!-- Flavor row container -->
        <div class="falvor-row">
        </div>
      </div>
    </div>
    <!-- Column for title -->
    <div class="col">
      <h1 class="title">Update {{categoryName}} Device</h1>
    </div>
    <!-- Column for right header content -->
    <div class="col">
    </div>
  </div>
    <!-- Main form row -->
    <div class="row mt-1">
        <!-- Column for form content -->
        <div class="col-md-12">
                    <!-- Form for Video device edit -->
                    <div *ngIf="showHideCreateFormV">
                    <form [formGroup]="editDeviceVForm" (ngSubmit)="EditDeviceVSubmit()" class="userform mt-3">
                        <!-- Row for form fields -->
                        <div class="row">
                            <!-- Column for left form fields -->
                            <div class="col">
                                <!-- Row for stbname field -->
                                <div class="row mb-3">
                                    <label for="stbname" class="col-md-3 col-form-label">Stb Name<span style="color:red; margin-left: 0.75em;">*</span></label>
                                    <div class="col-md-8">
                                      <input type="text" class="form-control" id="stbname" formControlName="stbname" autocomplete="off" 
                                       (keyup)="valuechange($event)" maxlength="20">
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['stbname']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['stbname']?.errors?.['required']">Please enter Stb name.</small>
                                            <small *ngIf="editDeviceVForm.controls['stbname']?.errors?.['pattern']">
                                              Invalid device name. Only alphabets, numbers, and underscores are allowed.
                                            </small>
                                        </div>
                                    </div>
                                  </div>
                                  <!-- Row for stbip field -->
                                  <div class="row mb-3">
                                    <label for="stbip" class="col-md-3 col-form-label">Stb IP<span style="color:red; margin-left: 0.75em;">*</span></label>
                                    <div class="col-md-8">
                                      <input type="text" class="form-control" id="stbip" formControlName="stbip" autocomplete="off">
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['stbip']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['stbip']?.errors?.['required']">Please enter Stb IP.</small>
                                            <small *ngIf="editDeviceVForm.controls['stbip']?.errors?.['pattern']">Please enter valid Stb IP.</small>
                                        </div>
                                    </div>
                                  </div>
                                  <!-- Row for macaddr field -->
                                  <div class="row mb-3">
                                    <label for="macaddr" class="col-md-3 col-form-label">Mac Address<span style="color:red; margin-left: 0.75em;">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" id="macaddr" formControlName="macaddr"
                                        autocomplete="off">
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['macaddr']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['macaddr']?.errors?.['required']">Please enter mac addr.</small>
                                            <small *ngIf="editDeviceVForm.controls['macaddr']?.errors?.['pattern']">Please enter valid mac address (e.g. AA:BB:CC:DD:EE:FF).</small>
                                        </div>
                                    </div>
                                  </div>
                                  <!-- Row for devicetype field -->
                                  <div class="row mb-3">
                                    <label for="devicetype" class="col-md-3 col-form-label">Device Type<span style="color:red; margin-left: 0.75em;">*</span></label>
                                    <div class="col-md-8">
                                        <select class="form-select" aria-label="Default select example" id="devicetype" formControlName="devicetype" (change)="devicetypeChange($event)">
                                            <option value="" default>Select</option>
                                            @for (item of allDeviceType; track $index) {
                                                <option value="{{item.deviceTypeName}}">{{item.deviceTypeName}}</option>
                                            }
                                          </select>
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['devicetype']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['devicetype']?.errors?.['required']">Please select device type.</small>
                                        </div>
                                    </div>
                                  </div>
                                  <!-- Row for isThunderEnabled field -->
                                  <div class="row mb-3">
                                    <label for="isthunderEnabled" class="col-md-3 col-form-label">Is Thunder Enabled</label>
                                    <div class="col-md-8">
                                        <div class="form-check form-check-inline form-check-reverse">
                                            <input class="form-check-input thunder" type="checkbox" id="isthunderEnabled" formControlName="isThunder"
                                            [checked]="isThunderchecked" (change)="isChecked($event)">
                                          </div>
                                    </div>
                                  </div>
                                  <!-- Row for thunderport field (conditional) -->
                                  <div class="row mb-3" *ngIf="showPortFile"> 
                                    <label for="thunderport" class="col-md-3 col-form-label">Thunder Port<span style="color:red; margin-left: 0.75em;">*</span></label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" id="thunderport" formControlName="thunderport" autocomplete="off">
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['thunderport']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['thunderport']?.errors?.['required']">Please enter thunder port.</small>
                                        </div>
                                    </div>
                                  </div>
                                  <!-- Row for device config file field -->
                                  <div class="row mb-3" > 
                                    <label for="deviceconfigfile" class="col-md-3  col-form-label">Device Config File :<mat-icon class="info-icon"
                                        matTooltip="Add a device config file to the device. If you don't have a config file, you can create a new one.">info</mat-icon></label>
                                    <div class="col-md-8">
                                      <div class="configbtngrp">
                                        <button type="button" class="btn btn-outline-secondary newconfigfile" (click)="existDeviceDialog(configFileName)">
                                          <span>{{
                                            configFileName === "sampleDevice.config"
                                            ? "Create New Device Config"
                                            : configFileName
                                            }}</span>
                                          File
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary newconfigfile" *ngIf="visibleDeviceconfigFile"
                                          (click)="openNewDeviceDialog()">
                                          Create New Device Config File
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                            </div>
                            <!-- Column for right form fields -->
                            <div class="col">
                              <!-- Row for OEM field -->
                              <div class="row mb-3">
                                <label for="oem" class="col-md-3 offset-1 col-form-label">OEM</label>
                                <div class="col-md-8">
                                    <select class="form-select" aria-label="Default select example"  id="oem" formControlName="oem">
                                        <option value="" default>Select</option>
                                        @for (item of allOem; track $index) {
                                            <option value="{{item.oemName}}">{{item.oemName}}</option>
                                        }
                                      </select>
                                    <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['oem']?.errors" class="text-danger">
                                        <small *ngIf="editDeviceVForm.controls['oem']?.errors?.['required']">Please select oem.</small>
                                    </div>
                                </div>
                              </div>
                                  <!-- Row for SoC field -->
                                  <div class="row mb-3">
                                    <label for="soc" class="col-md-3 offset-1 col-form-label">SoC</label>
                                    <div class="col-md-8">
                                        <select class="form-select" aria-label="Default select example"  id="soc" formControlName="soc">
                                            <option value="" default>Select</option>
                                            @for (item of allsoc; track $index) {
                                                <option value="{{item.socName}}">{{item.socName}}</option>
                                            }
                                          </select>
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['soc']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['soc']?.errors?.['required']">Please select soc.</small>
                                        </div>
                                    </div>
                                  </div>
                                 
                                  <!-- Row for configure device ports field -->
                                  <div class="row mb-3">
                                    <label for="configuredevicePorts" class="col-md-3 offset-1 col-form-label">Configure Device Ports</label>
                                    <div class="col-md-8">
                                        <div class="form-check form-check-inline form-check-reverse">
                                            <input class="form-check-input thunder" type="checkbox" id="configuredevicePorts" formControlName="configuredevicePorts"
                                             (change)="isCheckedConfig($event)">
                                          </div>
                                    </div>
                                  </div>
                                  <!-- Row for agentport field (conditional) -->
                                  <div class="row mb-3" *ngIf="showConfigPort"> 
                                    <label for="agentport" class="col-md-3 offset-1 col-form-label">Agent Port</label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" id="agentport" formControlName="agentport" autocomplete="off">
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['agentport']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['agentport']?.errors?.['required']">Please enter agent port.</small>
                                        </div>
                                    </div>
                                  </div>
                                  <!-- Row for agentstatusport field (conditional) -->
                                  <div class="row mb-3" *ngIf="showConfigPort"> 
                                    <label for="agentstatusport" class="col-md-3 offset-1 col-form-label">Agent Status Port</label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" id="agentstatusport" formControlName="agentstatusport" autocomplete="off" >
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['agentstatusport']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['agentstatusport']?.errors?.['required']">Please enter agent status port.</small>
                                        </div>
                                    </div>
                                  </div>
                                  <!-- Row for agentmonitorport field (conditional) -->
                                  <div class="row mb-3" *ngIf="showConfigPort"> 
                                    <label for="agentmonitorport" class="col-md-3 offset-1 col-form-label">Agent Monitor Port</label>
                                    <div class="col-md-8">
                                        <input type="text" class="form-control" id="agentmonitorport" formControlName="agentmonitorport" autocomplete="off" >
                                        <div *ngIf="editDeviceVFormSubmitted && editDeviceVForm.controls['agentmonitorport']?.errors" class="text-danger">
                                            <small *ngIf="editDeviceVForm.controls['agentmonitorport']?.errors?.['required']">Please enter agent monitor port.</small>
                                        </div>
                                    </div>
                                  </div>
                            </div>
                        </div>
                        <!-- Row for form buttons -->
                        <div class="row">
                            <!-- Column for form button group -->
                            <div class="mt-2 text-end">
                                <button class="reset-btn" matTooltip="Go back" (click)="goBack()">Back</button>
                                <button type="submit" class="create-btn" matTooltip="Update device">Update</button>
                            </div>
                        </div>
                    </form>
                    </div>
                  <!-- Form for Broadband device edit -->
                  <div *ngIf="showHideCreateFormB">
                    <form [formGroup]="rdkBForm" (ngSubmit)="editDeviceBSubmit()" class="userform mt-5">
                      <!-- Row for form fields -->
                      <div class="row">
                          <!-- Column for left form fields -->
                          <div class="col">
                              <!-- Row for gatewayName field -->
                              <div class="row mb-3">
                                  <label for="gatewayName" class="col-md-3 col-form-label">Gateway Name<span style="color:red; margin-left: 0.75em;">*</span></label>
                                  <div class="col-md-8">
                                    <input type="text" class="form-control" id="gatewayName" formControlName="gatewayName" autocomplete="off" maxlength="20">
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['gatewayName']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['gatewayName']?.errors?.['required']">Please enter gateway name.</small>
                                          <small *ngIf="rdkBForm.controls['gatewayName']?.errors?.['pattern']">
                                            Invalid gateway name. Only alphabets, numbers, and underscores are allowed.
                                          </small>
                                      </div>
                                  </div>
                                </div>
                                <!-- Row for gatewayIp field -->
                                <div class="row mb-3">
                                  <label for="gatewayIp" class="col-md-3 col-form-label">Gateway IP<span style="color:red; margin-left: 0.75em;">*</span></label>
                                  <div class="col-md-8">
                                    <input type="text" class="form-control" id="gatewayIp" formControlName="gatewayIp" autocomplete="off">
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['gatewayIp']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['gatewayIp']?.errors?.['required']">Please enter gateway ip.</small>
                                          <small *ngIf="rdkBForm.controls['gatewayIp']?.errors?.['pattern']">Please enter valid gateway ip.</small>
                                      </div>
                                  </div>
                                </div>
                                <!-- Row for macaddr field -->
                                <div class="row mb-3">
                                  <label for="macaddr" class="col-md-3 col-form-label">Mac Address<span style="color:red; margin-left: 0.75em;">*</span></label>
                                  <div class="col-md-8">
                                      <input type="text" class="form-control" id="macaddr" formControlName="macaddr"
                                      autocomplete="off">
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['macaddr']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['macaddr']?.errors?.['required']">Please enter mac addr.</small>
                                          <small *ngIf="rdkBForm.controls['macaddr']?.errors?.['pattern']">Please enter valid mac address (e.g. AA:BB:CC:DD:EE:FF).</small>
                                      </div>
                                  </div>
                                </div>
                                <!-- Row for devicetype field -->
                                <div class="row mb-3">
                                  <label for="devicetype" class="col-md-3 col-form-label">Device Type<span style="color:red; margin-left: 0.75em;">*</span></label>
                                  <div class="col-md-8">
                                      <select class="form-select" aria-label="Default select example" id="devicetype" formControlName="devicetype" (change)="devicetypeChange($event)">
                                          <option value="" default>Select</option>
                                          @for (item of allDeviceType; track $index) {
                                              <option value="{{item.deviceTypeName}}">{{item.deviceTypeName}}</option>
                                          }
                                        </select>
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['devicetype']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['devicetype']?.errors?.['required']">Please select device type.</small>
                                      </div>
                                  </div>
                                </div>
                                <!-- Row for OEM field -->
                                <div class="row mb-3">
                                  <label for="oem" class="col-md-3 col-form-label">OEM</label>
                                  <div class="col-md-8">
                                      <select class="form-select" aria-label="Default select example"  id="oem" formControlName="oem">
                                          <option value="" default>Select</option>
                                          @for (item of allOem; track $index) {
                                              <option value="{{item.oemName}}">{{item.oemName}}</option>
                                          }
                                        </select>
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['oem']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['oem']?.errors?.['required']">Please select oem.</small>
                                      </div>
                                  </div>
                                </div>
                          </div>
                          <!-- Column for right form fields -->
                          <div class="col">
                         
                                <!-- Row for SoC field -->
                                <div class="row mb-3">
                                  <label for="soc" class="col-md-3 offset-1 col-form-label">SoC</label>
                                  <div class="col-md-8">
                                      <select class="form-select" aria-label="Default select example"  id="soc" formControlName="soc">
                                          <option value="" default>Select</option>
                                          @for (item of allsoc; track $index) {
                                              <option value="{{item.socName}}">{{item.socName}}</option>
                                          }
                                        </select>
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['soc']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['soc']?.errors?.['required']">Please select soc.</small>
                                      </div>
                                  </div>
                                </div>
                                <!-- Row for configure device ports field -->
                                <div class="row mb-3">
                                  <label for="configuredevicePortB" class="col-md-3 offset-1 col-form-label">Configure Device Ports</label>
                                  <div class="col-md-8">
                                      <div class="form-check form-check-inline form-check-reverse">
                                          <input class="form-check-input thunder" type="checkbox" id="configuredevicePortB" 
                                          formControlName="configuredevicePortB" (change)="isCheckedConfigB($event)">
                                        </div>
                                  </div>
                                </div>
                                <!-- Row for agentPortb field (conditional) -->
                                <div class="row mb-3" *ngIf="showConfigPortB"> 
                                  <label for="agentPortb" class="col-md-3 offset-1 col-form-label">Agent Port</label>
                                  <div class="col-md-8">
                                      <input type="text" class="form-control" id="agentPortb" formControlName="agentPortb" autocomplete="off">
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['agentPortb']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['agentPortb']?.errors?.['required']">Please enter agent port.</small>
                                      </div>
                                  </div>
                                </div>
                                <!-- Row for agentStatusportB field (conditional) -->
                                <div class="row mb-3" *ngIf="showConfigPortB"> 
                                  <label for="agentStatusportB" class="col-md-3 offset-1 col-form-label">Agent Status Port</label>
                                  <div class="col-md-8">
                                      <input type="text" class="form-control" id="agentStatusportB" formControlName="agentStatusportB" autocomplete="off">
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['agentStatusportB']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['agentStatusportB']?.errors?.['required']">Please enter agent status port.</small>
                                      </div>
                                  </div>
                                </div>
                                <!-- Row for agentMonitorportB field (conditional) -->
                                <div class="row mb-3" *ngIf="showConfigPortB"> 
                                  <label for="agentMonitorportB" class="col-md-3 offset-1 col-form-label">Agent Monitor Port</label>
                                  <div class="col-md-8">
                                      <input type="text" class="form-control" id="agentMonitorportB" formControlName="agentMonitorportB" autocomplete="off">
                                      <div *ngIf="rdkbFormSubmitted && rdkBForm.controls['agentMonitorportB']?.errors" class="text-danger">
                                          <small *ngIf="rdkBForm.controls['agentMonitorportB']?.errors?.['required']">Please enter agent monitor port.</small>
                                      </div>
                                  </div>
                                </div>
                          </div>
                      </div>
                      <!-- Row for form buttons -->
                      <div class="row">
                          <!-- Column for form button group -->
                          <div class="mt-2 text-end">
                              <button class="reset-btn" matTooltip="Go back" (click)="goBack()">Back</button>
                              <button type="submit" matTooltip="Update device"class="create-btn">Update</button>
                          </div>
                      </div>
                  </form>
                  </div>

        <!-- End of form content column -->
        </div>
    <!-- End of main form row -->
    </div>
<!-- End of main container -->
</div>

<!-- Modal Start-->
 <ng-template #dialogTemplate>
  <!-- Modal dialog content for existing config -->
  <mat-dialog-content class="exsit-modal-content">
    <!-- Config modal container -->
    <div class="config-modal">
      <!-- Config content container -->
      <div class="config-content">
        <!-- Form for uploading config file -->
        <form [formGroup]="uploadConfigForm" (ngSubmit)="configFileUpload()">
        <!-- Config header section -->
        <div class="config-header">
          <!-- Input for config filename -->
          <input type="text" id="configFilename" class="form-control config-input" formControlName="editorFilename" readonly />
          
          <!-- Button to toggle filename -->
          <button type="button" class="btn btn-outline-primary btn-sm delete-config config-editbtn"
            (click)="toggleFileNameDialog()" matTooltip="Toggle FileName" *ngIf="
                              editDeviceVForm.value.stbname &&
                              editDeviceVForm.value.devicetype &&
                              visibleDeviceconfigFile == true &&
                              configFileName != 'sampleDevice.config'
                            ">
            <i class="bi bi-toggles2 toogle-name"></i>
          </button>
          <!-- Button to delete config file -->
          <div *ngIf="
                          visibleDeviceconfigFile == false &&
                          configFileName !== 'sampleDevice.config'
                        ">
            <button type="button" class="btn btn-outline-primary btn-sm delete-config"
              (click)="deleteDeviceConfigFile(configFileName)" matTooltip="Delete Config File">
              <i class="bi bi-trash-fill delete-fill"></i>
            </button>
          </div>
  
          <!-- Button to download config file -->
          <button type="button" class="btn btn-outline-primary btn-sm delete-config" (click)="downloadConfigFile(configFileName)"  matTooltip ="Download config file">
            <i class="bi bi-download download-icon"></i>
          </button>
        </div>
        <!-- Body of config modal -->
        <div class="existModal-body">
          <!-- Row for change file name and upload config -->
          <div class="row">
            <!-- Column for change file name -->
            <div class="col changefile-name">
            </div>
            <!-- Column for upload config button -->
            <div class="col uploadconfig">
              <button type="button" class="download-btn backEditor" (click)="backToExistingEditor()" matTooltip="Go back" *ngIf="backToExistEditorbtn">Back</button>
              <button type="button" class="download-btn" (click)="openExistingModal('Upload Configuration File')" matTooltip="Upload configuration file" *ngIf="showExistUploadButton">Upload Configuration File</button>
            </div>
          </div>
            <!-- Editor container for config content -->
            <div class="editor-container mt-1 exist-config" *ngIf="existingConfigEditor">
              <ngx-monaco-editor [options]="editorOptions" formControlName="editorContent" (onInit)="onEditorInit($event)">
              </ngx-monaco-editor>
              <div *ngIf="existConfigSubmitted && uploadConfigForm.controls['editorContent']?.errors" class="text-danger">
                <small *ngIf="uploadConfigForm.controls['editorContent']?.errors?.['required']">Please add some content</small>
            </div>  
            </div>
  
            <!-- Container for uploading existing config file -->
            <div class="container mt-5 upload-container" *ngIf="uploadExistingConfig">
              <!-- Row for upload config file input -->
              <div class="row mb-3"> 
                  <label for="uploadConfigFileModal" class="col-md-4  col-form-label" style="  font-size: 1em; font-family: Roboto;font-weight: 500;">Upload Configuration file<span style="color:red; margin-left: 0.75em;">*</span></label>
                      <div class="col-md-8">
                          <input class="form-control form-control-sm" id="uploadConfigFileModal" type="file"  formControlName="uploadConfigFileModal"(change)="onExistConfigChange($event)">
                          <div *ngIf="existConfigSubmitted && uploadConfigForm.controls['uploadConfigFileModal']?.errors?.['required']" class="text-danger">
                             <small>Please select a configuration file.</small>
                          </div>
                        </div>
              </div>
              <div class="modal-btns">
                <button type="button" class="download-btn" (click)="closeDialog()" matTooltip="Close">Close</button>
                <button type="submit" class="download-btn" matTooltip="Upload Config File">Upload</button>
              </div>
          </div>
        </div>
        <!-- Modal button group -->
        <div class="modal-btns" *ngIf="!uploadExistingConfig">
          <button type="button" class="download-btn" matTooltip="Close"(click)="closeDialog()">Close</button>
          <button type="submit" class="download-btn" matTooltip="Update Config File">Update</button>
        </div>
        </form>
      </div>
    <!-- End of config modal container -->
    </div>
  </mat-dialog-content>
<!-- End of modal template -->
</ng-template>
 <!-- Modal End -->

<!-- Device Modal Start-->
<ng-template #newDeviceTemplate>
  <!-- Modal dialog content for new device config -->
  <mat-dialog-content class="exsit-modal-content">
    <!-- Config modal container -->
    <div class="config-modal">
      <!-- Config content container -->
      <div class="config-content">
        <!-- Form for uploading new device config file -->
        <form [formGroup]="uploadDeviceConfigForm" (ngSubmit)="configDeviceFileUpload()">
        <!-- Config header section for new device -->
        <div class="config-header newdevice-header">
          <!-- Title for new device config modal -->
          <h1 class="modal-title device-title" id="staticBackdropLabel">{{uploadCreateHeading}}</h1>
        </div>
        <!-- Body of new device config modal -->
        <div class="existModal-body">
          <!-- Row for change file name and upload config -->
          <div class="row">
            <!-- Column for change file name -->
            <div class="col changefile-name">
              <input type="text" id="configFilename" class="form-control config-input device-input" formControlName="editorFilename"
                [readOnly]="!isEditingFile" />
              <button type="button" class="btn bbtn-outline-primary btn-sm delete-config config-editbtn" (click)="toggleIsEdit()"
                matTooltip="Change FileName">
                <i [class]="
                                    'bi ' + (isEditingFile ? 'bi-check-circle' : 'bi-pencil')
                                  "></i>
              </button>
              <button type="button" class="btn btn-outline-primary btn-sm delete-config config-editbtn" (click)="toggleFileName()"
                matTooltip="Toggle FileName" *ngIf="
                                  editDeviceVForm.value.stbname &&
                                  editDeviceVForm.value.devicetype &&
                                  visibleDeviceconfigFile == false &&
                                  configFileName == 'sampleDevice.config'
                                ">
                <i class="bi bi-toggles2 toogle-name"></i>
              </button>
              </div>
            <!-- Column for upload config button -->
            <div class="col uploadconfig">
              <button type="button" class="download-btn backEditor" (click)="backToEditor('Create New Device Config File')" matTooltip="Go back"*ngIf="backToEditorbtn">Back</button>
              <button type="button" class="download-btn" (click)="openUploadFile('Upload Configuration File')" matTooltip="Upload file" *ngIf="showUploadButton">Upload Configuration File</button>
            </div>
          </div>
  
            <!-- Editor container for new device config content -->
            <div class="device-container mt-4 device-editor" *ngIf="deviceEditor">
              <ngx-monaco-editor [options]="editorOptions" formControlName="editorContent" (onInit)="onEditorInit($event)">
              </ngx-monaco-editor>
              <div *ngIf="submitted && uploadDeviceConfigForm.controls['editorContent']?.errors" class="text-danger">
                <small *ngIf="uploadDeviceConfigForm.controls['editorContent']?.errors?.['required']">Please add some content</small>
            </div>  
            </div>
  
            <!-- Container for uploading new device config file -->
            <div class="container mt-5 upload-container" *ngIf="uploadConfigSec">
              <!-- Row for upload device config file input -->
              <div class="row mb-3"> 
                  <label for="uploadDeviceConfigFileModal" class="col-md-4  col-form-label" style="  font-size: 1em; font-family: Roboto;font-weight: 500;">Upload Configuration file<span style="color:red; margin-left: 0.75em;">*</span></label>
                      <div class="col-md-8">
                          <input class="form-control form-control-sm" id="uploadDeviceConfigFileModal" type="file" formControlName="uploadDeviceConfigFileModal" (change)="onModalFileChange($event)">
                          <div *ngIf="submitted && uploadDeviceConfigForm.controls['uploadDeviceConfigFileModal']?.errors?.['required']" class="text-danger">
                             <small>Please select a configuration file.</small>
                          </div>
                  </div>
              </div>
              <div class="modal-btns">
                <button type="button" class="download-btn" matTooltip="Close" (click)="closeNewDeviceDialog()">Close</button>
                <button type="submit" class="download-btn" matTooltip="Upload file">Upload</button>
             </div>
          </div>
  
        </div>
        <!-- Modal button group -->
        <div class="modal-btns" *ngIf="!uploadConfigSec">
          <button type="button" class="download-btn" matTooltip="Close" (click)="closeNewDeviceDialog()">Close</button>
          <button type="submit" class="download-btn" matTooltip="Create config file">Create</button>
        </div>
        </form>
      </div>
    <!-- End of new device config modal container -->
    </div>
  </mat-dialog-content>
<!-- End of new device modal template -->
</ng-template>
 <!-- Device Modal End-->
